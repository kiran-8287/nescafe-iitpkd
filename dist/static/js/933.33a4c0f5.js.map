{"version":3,"file":"static/js/933.33a4c0f5.js","mappings":"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","sources":["webpack://nescafe-restaurant/./src/components/OrderHistory.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { supabase } from '../supabaseClient';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useCart } from '../context/CartContext';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    ShoppingBag,\r\n    ChevronDown,\r\n    ChevronUp,\r\n    Clock,\r\n    CheckCircle2,\r\n    Package,\r\n    AlertCircle,\r\n    ArrowLeft,\r\n    RotateCcw,\r\n    Receipt,\r\n    Calendar,\r\n    ArrowRight\r\n} from 'lucide-react';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst STATUS_CONFIG = {\r\n    pending: { color: 'bg-amber-100 text-amber-700', icon: Clock, label: 'Pending' },\r\n    preparing: { color: 'bg-blue-100 text-blue-700', icon: Package, label: 'Preparing' },\r\n    ready: { color: 'bg-purple-100 text-purple-700', icon: Package, label: 'Ready' },\r\n    delivered: { color: 'bg-green-100 text-green-700', icon: CheckCircle2, label: 'Delivered' },\r\n    cancelled: { color: 'bg-red-100 text-red-700', icon: AlertCircle, label: 'Cancelled' }\r\n};\r\n\r\nconst OrderHistory = () => {\r\n    const { user } = useAuth();\r\n    const { addItem, toggleCart } = useCart();\r\n    const navigate = useNavigate();\r\n    const [orders, setOrders] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [filter, setFilter] = useState('all'); // all, ongoing, completed\r\n    const [expandedOrder, setExpandedOrder] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            fetchOrders();\r\n        }\r\n    }, [user]);\r\n\r\n    const fetchOrders = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const { data, error } = await supabase\r\n                .from('orders')\r\n                .select(`\r\n                    *,\r\n                    order_items (*)\r\n                `)\r\n                .eq('user_id', user.id)\r\n                .order('created_at', { ascending: false });\r\n\r\n            if (error) throw error;\r\n            setOrders(data || []);\r\n        } catch (error) {\r\n            console.error('Error fetching orders:', error);\r\n            toast.error(\"Couldn't fetch your history. Like our internet.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleReorder = (order) => {\r\n        if (!order.order_items || order.order_items.length === 0) return;\r\n\r\n        order.order_items.forEach(item => {\r\n            addItem({\r\n                id: item.item_id,\r\n                name: item.name,\r\n                price: item.price,\r\n                selectedVariant: item.variant,\r\n                customization: item.customization || [],\r\n                quantity: item.quantity\r\n            });\r\n        });\r\n\r\n        toast.success(\"Past favorites added to cart!\");\r\n        toggleCart();\r\n    };\r\n\r\n    const filteredOrders = orders.filter(order => {\r\n        if (filter === 'all') return true;\r\n        if (filter === 'ongoing') {\r\n            return ['pending', 'preparing', 'ready'].includes(order.status);\r\n        }\r\n        if (filter === 'completed') {\r\n            return ['delivered', 'cancelled'].includes(order.status);\r\n        }\r\n        return true;\r\n    });\r\n\r\n    const formatDate = (dateString) => {\r\n        const options = {\r\n            day: 'numeric',\r\n            month: 'short',\r\n            year: 'numeric',\r\n            hour: '2-digit',\r\n            minute: '2-digit'\r\n        };\r\n        return new Date(dateString).toLocaleDateString('en-IN', options);\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-6\">\r\n                <div className=\"w-12 h-12 border-4 border-[#3E2723] border-t-transparent rounded-full animate-spin mb-4\" />\r\n                <p className=\"text-[#3E2723] font-black uppercase tracking-widest text-xs\">Reliving memories...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 pb-20 font-sans\">\r\n            {/* Header */}\r\n            <div className=\"bg-white px-6 pt-12 pb-6 shadow-sm sticky top-0 z-30 border-b border-gray-100\">\r\n                <div className=\"max-w-2xl mx-auto flex items-center gap-4 mb-6\">\r\n                    <button\r\n                        onClick={() => navigate('/dashboard')}\r\n                        className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\r\n                    >\r\n                        <ArrowLeft size={24} className=\"text-[#3E2723]\" />\r\n                    </button>\r\n                    <h1 className=\"text-2xl font-black text-[#3E2723]\">Your Brew History</h1>\r\n                </div>\r\n\r\n                {/* Filter Tabs */}\r\n                <div className=\"max-w-2xl mx-auto flex gap-2 p-1 bg-gray-100 rounded-2xl\">\r\n                    {['all', 'ongoing', 'completed'].map((tab) => (\r\n                        <button\r\n                            key={tab}\r\n                            onClick={() => setFilter(tab)}\r\n                            className={`flex-1 py-3 px-4 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all ${filter === tab\r\n                                    ? 'bg-white text-[#3E2723] shadow-sm'\r\n                                    : 'text-gray-400 hover:text-gray-600'\r\n                                }`}\r\n                        >\r\n                            {tab}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            <main className=\"max-w-2xl mx-auto p-4 mt-4 space-y-4\">\r\n                {filteredOrders.length > 0 ? (\r\n                    filteredOrders.map((order) => {\r\n                        const isExpanded = expandedOrder === order.id;\r\n                        const StatusIcon = STATUS_CONFIG[order.status]?.icon || Clock;\r\n\r\n                        return (\r\n                            <motion.div\r\n                                layout\r\n                                key={order.id}\r\n                                className=\"bg-white rounded-[2rem] shadow-sm border border-gray-100 overflow-hidden\"\r\n                            >\r\n                                {/* Main Card Content */}\r\n                                <div className=\"p-5 flex flex-col gap-4\">\r\n                                    <div className=\"flex justify-between items-start\">\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <div className={`p-3 rounded-2xl ${STATUS_CONFIG[order.status]?.color} bg-opacity-10`}>\r\n                                                <StatusIcon size={20} />\r\n                                            </div>\r\n                                            <div>\r\n                                                <h3 className=\"font-black text-[#3E2723]\">Order #{order.id.slice(0, 8).toUpperCase()}</h3>\r\n                                                <div className=\"flex items-center gap-2 text-[10px] text-gray-400 font-bold uppercase tracking-wider\">\r\n                                                    <Calendar size={12} /> {formatDate(order.created_at)}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"text-right\">\r\n                                            <p className=\"text-lg font-black text-[#3E2723]\">₹{order.total_amount}</p>\r\n                                            <span className={`px-2 py-0.5 rounded-full text-[8px] font-black uppercase tracking-widest ${STATUS_CONFIG[order.status]?.color}`}>\r\n                                                {order.status}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Action Buttons */}\r\n                                    <div className=\"flex gap-2\">\r\n                                        <button\r\n                                            onClick={() => setExpandedOrder(isExpanded ? null : order.id)}\r\n                                            className=\"flex-1 py-3 px-4 bg-gray-50 text-[#3E2723] rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 hover:bg-gray-100 transition-all border border-gray-100\"\r\n                                        >\r\n                                            {isExpanded ? 'Hide Details' : 'View Details'}\r\n                                            {isExpanded ? <ChevronUp size={14} /> : <ChevronDown size={14} />}\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => handleReorder(order)}\r\n                                            className=\"py-3 px-6 bg-[#3E2723] text-white rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 hover:bg-[#5D4037] transition-all shadow-md active:scale-95\"\r\n                                        >\r\n                                            Reorder <RotateCcw size={14} />\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    {/* Expandable Details */}\r\n                                    <AnimatePresence>\r\n                                        {isExpanded && (\r\n                                            <motion.div\r\n                                                initial={{ height: 0, opacity: 0 }}\r\n                                                animate={{ height: 'auto', opacity: 1 }}\r\n                                                exit={{ height: 0, opacity: 0 }}\r\n                                                className=\"overflow-hidden\"\r\n                                            >\r\n                                                <div className=\"pt-4 mt-4 border-t border-dashed border-gray-100 space-y-3\">\r\n                                                    {order.order_items?.map((item, idx) => (\r\n                                                        <div key={idx} className=\"flex justify-between items-center text-sm\">\r\n                                                            <div className=\"flex flex-col\">\r\n                                                                <span className=\"font-bold text-[#3E2723]\">{item.quantity}x {item.name}</span>\r\n                                                                <span className=\"text-[10px] text-gray-400 font-medium\">{item.variant}</span>\r\n                                                            </div>\r\n                                                            <span className=\"font-bold text-gray-500\">₹{item.price * item.quantity}</span>\r\n                                                        </div>\r\n                                                    ))}\r\n                                                    <div className=\"pt-2 flex justify-between items-center border-t border-gray-50\">\r\n                                                        <span className=\"text-[10px] font-black text-gray-300 uppercase tracking-widest\">Total Bill</span>\r\n                                                        <span className=\"font-black text-[#D4AF37]\">₹{order.total_amount}</span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </motion.div>\r\n                                        )}\r\n                                    </AnimatePresence>\r\n                                </div>\r\n                            </motion.div>\r\n                        );\r\n                    })\r\n                ) : (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, y: 20 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        className=\"text-center py-20 bg-white rounded-[3rem] border-2 border-dashed border-gray-100 px-6\"\r\n                    >\r\n                        <div className=\"w-20 h-20 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n                            <ShoppingBag size={40} className=\"text-gray-200\" />\r\n                        </div>\r\n                        <h3 className=\"text-xl font-black text-[#3E2723] mb-2\">No history yet?</h3>\r\n                        <p className=\"text-gray-400 text-sm font-medium mb-8\">\r\n                            Your coffee stories start here. Go ahead, order your first brew!\r\n                        </p>\r\n                        <button\r\n                            onClick={() => navigate('/menu')}\r\n                            className=\"bg-[#3E2723] text-white py-4 px-8 rounded-2xl font-black shadow-lg hover:bg-[#5D4037] transition-all flex items-center justify-center gap-2 mx-auto active:scale-95\"\r\n                        >\r\n                            Explore Menu <ArrowRight size={20} />\r\n                        </button>\r\n                    </motion.div>\r\n                )}\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default OrderHistory;\r\n"],"names":["STATUS_CONFIG","pending","color","icon","Clock","label","preparing","Package","ready","delivered","CheckCircle2","cancelled","AlertCircle","OrderHistory","user","useAuth","addItem","toggleCart","useCart","navigate","useNavigate","orders","setOrders","useState","loading","setLoading","filter","setFilter","expandedOrder","setExpandedOrder","useEffect","fetchOrders","async","data","error","supabase","from","select","eq","id","order","ascending","console","toast","filteredOrders","includes","status","_jsxs","className","children","_jsx","onClick","ArrowLeft","size","map","tab","length","isExpanded","StatusIcon","motion","div","layout","slice","toUpperCase","Calendar","dateString","created_at","Date","toLocaleDateString","day","month","year","hour","minute","total_amount","ChevronUp","ChevronDown","order_items","forEach","item","item_id","name","price","selectedVariant","variant","customization","quantity","success","handleReorder","RotateCcw","AnimatePresence","initial","height","opacity","animate","exit","idx","y","ShoppingBag","ArrowRight"],"sourceRoot":""}