/*! For license information please see 190.00107c1e.js.LICENSE.txt */
"use strict";(self.webpackChunknescafe_restaurant=self.webpackChunknescafe_restaurant||[]).push([[190],{190(e,t,a){a.r(t),a.d(t,{default:()=>A});var s=a(6540),r=a(5570),l=a(8449),i=a(429),n=a(9605),c=a(892),d=a(5164),o=a(7235),x=a(7133),m=a(165),h=a(6644),p=a(232),u=a(4207);const y=(0,u.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),g=(0,u.A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var b=a(5107);const f=(0,u.A)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var j=a(8110),k=a(8635),v=a(888),N=a(4848);const w={pending:{color:"bg-amber-100 text-amber-700",icon:o.A,label:"Pending"},preparing:{color:"bg-blue-100 text-blue-700",icon:x.A,label:"Preparing"},ready:{color:"bg-purple-100 text-purple-700",icon:x.A,label:"Ready"},delivered:{color:"bg-green-100 text-green-700",icon:m.A,label:"Delivered"},cancelled:{color:"bg-red-100 text-red-700",icon:h.A,label:"Cancelled"}},A=()=>{const{user:e}=(0,i.A)(),{addItem:t,toggleCart:a}=(0,n._)(),x=(0,r.Zp)(),[m,h]=(0,s.useState)([]),[u,A]=(0,s.useState)(!0),[C,E]=(0,s.useState)("all"),[_,z]=(0,s.useState)(null);(0,s.useEffect)(()=>{e&&M()},[e]);const M=async()=>{try{A(!0);const{data:t,error:a}=await l.N.from("orders").select("\n                    *,\n                    order_items (*)\n                ").eq("user_id",e.id).order("created_at",{ascending:!1});if(a)throw a;h(t||[])}catch(e){console.error("Error fetching orders:",e),v.Ay.error("Couldn't fetch your history. Like our internet.")}finally{A(!1)}},q=m.filter(e=>"all"===C||("ongoing"===C?["pending","preparing","ready"].includes(e.status):"completed"!==C||["delivered","cancelled"].includes(e.status)));return u?(0,N.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-6",children:[(0,N.jsx)("div",{className:"w-12 h-12 border-4 border-[#3E2723] border-t-transparent rounded-full animate-spin mb-4"}),(0,N.jsx)("p",{className:"text-[#3E2723] font-black uppercase tracking-widest text-xs",children:"Reliving memories..."})]}):(0,N.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20 font-sans",children:[(0,N.jsxs)("div",{className:"bg-white px-6 pt-12 pb-6 shadow-sm sticky top-0 z-30 border-b border-gray-100",children:[(0,N.jsxs)("div",{className:"max-w-2xl mx-auto flex items-center gap-4 mb-6",children:[(0,N.jsx)("button",{onClick:()=>x("/dashboard"),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,N.jsx)(p.A,{size:24,className:"text-[#3E2723]"})}),(0,N.jsx)("h1",{className:"text-2xl font-black text-[#3E2723]",children:"Your Brew History"})]}),(0,N.jsx)("div",{className:"max-w-2xl mx-auto flex gap-2 p-1 bg-gray-100 rounded-2xl",children:["all","ongoing","completed"].map(e=>(0,N.jsx)("button",{onClick:()=>E(e),className:"flex-1 py-3 px-4 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all "+(C===e?"bg-white text-[#3E2723] shadow-sm":"text-gray-400 hover:text-gray-600"),children:e},e))})]}),(0,N.jsx)("main",{className:"max-w-2xl mx-auto p-4 mt-4 space-y-4",children:q.length>0?q.map(e=>{const s=_===e.id,r=w[e.status]?.icon||o.A;return(0,N.jsx)(c.P.div,{layout:!0,className:"bg-white rounded-[2rem] shadow-sm border border-gray-100 overflow-hidden",children:(0,N.jsxs)("div",{className:"p-5 flex flex-col gap-4",children:[(0,N.jsxs)("div",{className:"flex justify-between items-start",children:[(0,N.jsxs)("div",{className:"flex items-center gap-3",children:[(0,N.jsx)("div",{className:`p-3 rounded-2xl ${w[e.status]?.color} bg-opacity-10`,children:(0,N.jsx)(r,{size:20})}),(0,N.jsxs)("div",{children:[(0,N.jsxs)("h3",{className:"font-black text-[#3E2723]",children:["Order #",e.id.slice(0,8).toUpperCase()]}),(0,N.jsxs)("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 font-bold uppercase tracking-wider",children:[(0,N.jsx)(y,{size:12})," ",(l=e.created_at,new Date(l).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}))]})]})]}),(0,N.jsxs)("div",{className:"text-right",children:[(0,N.jsxs)("p",{className:"text-lg font-black text-[#3E2723]",children:["₹",e.total_amount]}),(0,N.jsx)("span",{className:`px-2 py-0.5 rounded-full text-[8px] font-black uppercase tracking-widest ${w[e.status]?.color}`,children:e.status})]})]}),(0,N.jsxs)("div",{className:"flex gap-2",children:[(0,N.jsxs)("button",{onClick:()=>z(s?null:e.id),className:"flex-1 py-3 px-4 bg-gray-50 text-[#3E2723] rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 hover:bg-gray-100 transition-all border border-gray-100",children:[s?"Hide Details":"View Details",s?(0,N.jsx)(g,{size:14}):(0,N.jsx)(b.A,{size:14})]}),(0,N.jsxs)("button",{onClick:()=>(e=>{e.order_items&&0!==e.order_items.length&&(e.order_items.forEach(e=>{t({id:e.item_id,name:e.name,price:e.price,selectedVariant:e.variant,customization:e.customization||[],quantity:e.quantity})}),v.Ay.success("Past favorites added to cart!"),a())})(e),className:"py-3 px-6 bg-[#3E2723] text-white rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 hover:bg-[#5D4037] transition-all shadow-md active:scale-95",children:["Reorder ",(0,N.jsx)(f,{size:14})]})]}),(0,N.jsx)(d.N,{children:s&&(0,N.jsx)(c.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:(0,N.jsxs)("div",{className:"pt-4 mt-4 border-t border-dashed border-gray-100 space-y-3",children:[e.order_items?.map((e,t)=>(0,N.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,N.jsxs)("div",{className:"flex flex-col",children:[(0,N.jsxs)("span",{className:"font-bold text-[#3E2723]",children:[e.quantity,"x ",e.name]}),(0,N.jsx)("span",{className:"text-[10px] text-gray-400 font-medium",children:e.variant})]}),(0,N.jsxs)("span",{className:"font-bold text-gray-500",children:["₹",e.price*e.quantity]})]},t)),(0,N.jsxs)("div",{className:"pt-2 flex justify-between items-center border-t border-gray-50",children:[(0,N.jsx)("span",{className:"text-[10px] font-black text-gray-300 uppercase tracking-widest",children:"Total Bill"}),(0,N.jsxs)("span",{className:"font-black text-[#D4AF37]",children:["₹",e.total_amount]})]})]})})})]})},e.id);var l}):(0,N.jsxs)(c.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-20 bg-white rounded-[3rem] border-2 border-dashed border-gray-100 px-6",children:[(0,N.jsx)("div",{className:"w-20 h-20 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,N.jsx)(j.A,{size:40,className:"text-gray-200"})}),(0,N.jsx)("h3",{className:"text-xl font-black text-[#3E2723] mb-2",children:"No history yet?"}),(0,N.jsx)("p",{className:"text-gray-400 text-sm font-medium mb-8",children:"Your coffee stories start here. Go ahead, order your first brew!"}),(0,N.jsxs)("button",{onClick:()=>x("/menu"),className:"bg-[#3E2723] text-white py-4 px-8 rounded-2xl font-black shadow-lg hover:bg-[#5D4037] transition-all flex items-center justify-center gap-2 mx-auto active:scale-95",children:["Explore Menu ",(0,N.jsx)(k.A,{size:20})]})]})})]})}},6644(e,t,a){a.d(t,{A:()=>s});const s=(0,a(4207).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},165(e,t,a){a.d(t,{A:()=>s});const s=(0,a(4207).A)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},7133(e,t,a){a.d(t,{A:()=>s});const s=(0,a(4207).A)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},8110(e,t,a){a.d(t,{A:()=>s});const s=(0,a(4207).A)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])}}]);
//# sourceMappingURL=190.00107c1e.js.map