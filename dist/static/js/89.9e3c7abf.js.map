{"version":3,"file":"static/js/89.9e3c7abf.js","mappings":"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","sources":["webpack://nescafe-restaurant/./src/components/Dashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { supabase } from '../supabaseClient';\r\nimport { Coffee, LogOut, User, Building2, Mail, Shield, Lock, ArrowLeft } from 'lucide-react';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst Dashboard = () => {\r\n    const { user, signOut } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [profile, setProfile] = useState(null);\r\n    const [loadingProfile, setLoadingProfile] = useState(true);\r\n    const [isSaving, setIsSaving] = useState(false);\r\n    const [confirmSignOut, setConfirmSignOut] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        hostel: ''\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            fetchProfile();\r\n        }\r\n    }, [user]);\r\n\r\n    const fetchProfile = async () => {\r\n        const { data } = await supabase\r\n            .from('users')\r\n            .select('*')\r\n            .eq('id', user.id)\r\n            .single();\r\n        if (data) {\r\n            setProfile(data);\r\n            setFormData({\r\n                name: data.name || '',\r\n                hostel: data.hostel || ''\r\n            });\r\n        }\r\n        setLoadingProfile(false);\r\n    };\r\n\r\n    const handleSaveProfile = async () => {\r\n        if (!formData.name.trim()) {\r\n            toast.error(\"Name cannot be empty!\");\r\n            return;\r\n        }\r\n\r\n        setIsSaving(true);\r\n        try {\r\n            const { error } = await supabase\r\n                .from('users')\r\n                .update({\r\n                    name: formData.name,\r\n                    hostel: formData.hostel\r\n                })\r\n                .eq('id', user.id);\r\n\r\n            if (error) throw error;\r\n            toast.success(\"Profile updated! Looking sharp.\");\r\n            fetchProfile();\r\n        } catch (error) {\r\n            console.error('Update error:', error);\r\n            toast.error(\"Failed to update. Maybe the caffeine hasn't kicked in.\");\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    const handleSignOut = async () => {\r\n        try {\r\n            await signOut();\r\n            toast.success('Signed out successfully. See you soon! ☕');\r\n            navigate('/login', { replace: true });\r\n        } catch (error) {\r\n            toast.error('Sign out failed, but clearing local session.');\r\n            navigate('/login', { replace: true });\r\n        }\r\n    };\r\n\r\n    const displayName = profile?.name || user?.user_metadata?.name || 'Coffee Lover';\r\n    const displayRole = profile?.role || user?.user_metadata?.role || 'student';\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#FFF8E1] flex flex-col items-center justify-center p-6 font-sans\">\r\n            <div className=\"w-full max-w-sm mb-2\">\r\n                <button\r\n                    onClick={() => navigate(-1)}\r\n                    className=\"flex items-center gap-2 text-[#3E2723] text-xs font-black uppercase tracking-widest hover:text-[#D4AF37] transition-colors\"\r\n                >\r\n                    <ArrowLeft size={16} /> Back\r\n                </button>\r\n            </div>\r\n\r\n            {/* Header */}\r\n            <div className=\"text-center mb-8\">\r\n                <div className=\"inline-flex items-center justify-center w-16 h-16 bg-[#3E2723] rounded-2xl mb-4 shadow-lg\">\r\n                    <Coffee size={32} className=\"text-[#D4AF37]\" />\r\n                </div>\r\n                <h1 className=\"text-3xl font-black text-[#3E2723]\">Your Brew Hub</h1>\r\n                <p className=\"text-gray-500 text-sm mt-1\">Nescafe IITPKD — Member Dashboard</p>\r\n            </div>\r\n\r\n            {/* Profile Card */}\r\n            <div className=\"bg-white rounded-3xl shadow-xl p-7 w-full max-w-sm space-y-5 mb-5\">\r\n                {loadingProfile ? (\r\n                    <div className=\"text-center text-gray-400 py-4 animate-pulse\">Loading your profile...</div>\r\n                ) : (\r\n                    <>\r\n                        {/* Avatar + Name */}\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <div className=\"w-14 h-14 bg-[#FFF8E1] border-2 border-[#D4AF37]/30 rounded-2xl flex items-center justify-center flex-shrink-0\">\r\n                                <span className=\"text-2xl font-black text-[#3E2723]\">\r\n                                    {displayName.charAt(0).toUpperCase()}\r\n                                </span>\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"font-black text-[#3E2723] text-lg leading-tight\">{displayName}</p>\r\n                                <p className=\"text-xs text-gray-400 font-medium\">{user?.email}</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"h-px bg-gray-100\" />\r\n\r\n                        {/* Form Fields */}\r\n                        <div className=\"space-y-4 pt-1\">\r\n\r\n                            {/* Editable Name */}\r\n                            <div className=\"space-y-1.5\">\r\n                                <label className=\"flex items-center gap-2 text-[10px] font-black text-gray-400 uppercase tracking-widest\">\r\n                                    <User size={12} className=\"text-[#D4AF37]\" /> Full Name\r\n                                </label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={formData.name}\r\n                                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                                    placeholder=\"Your Name\"\r\n                                    className=\"w-full bg-gray-50 border border-gray-100 rounded-xl px-4 py-2.5 text-sm font-bold text-[#3E2723] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all\"\r\n                                />\r\n                            </div>\r\n\r\n                            {/* Editable Hostel / Block */}\r\n                            <div className=\"space-y-1.5\">\r\n                                <label className=\"flex items-center gap-2 text-[10px] font-black text-gray-400 uppercase tracking-widest\">\r\n                                    <Building2 size={12} className=\"text-[#D4AF37]\" /> Hostel / Block\r\n                                </label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={formData.hostel}\r\n                                    onChange={(e) => setFormData({ ...formData, hostel: e.target.value })}\r\n                                    placeholder=\"e.g. Block A, Room 101\"\r\n                                    className=\"w-full bg-gray-50 border border-gray-100 rounded-xl px-4 py-2.5 text-sm font-bold text-[#3E2723] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all\"\r\n                                />\r\n                            </div>\r\n\r\n                            {/* Locked Email */}\r\n                            <div className=\"space-y-1.5\">\r\n                                <label className=\"flex items-center gap-2 text-[10px] font-black text-gray-400 uppercase tracking-widest\">\r\n                                    <Mail size={12} className=\"text-gray-400\" /> Email Address\r\n                                    <span className=\"ml-auto flex items-center gap-1 text-gray-300\"><Lock size={10} /> Locked</span>\r\n                                </label>\r\n                                <div className=\"w-full bg-gray-100 border border-gray-100 rounded-xl px-4 py-2.5 text-sm font-bold text-gray-400 cursor-not-allowed select-none\">\r\n                                    {user?.email}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Locked Role */}\r\n                            <div className=\"space-y-1.5\">\r\n                                <label className=\"flex items-center gap-2 text-[10px] font-black text-gray-400 uppercase tracking-widest\">\r\n                                    <Shield size={12} className=\"text-gray-400\" /> Role\r\n                                    <span className=\"ml-auto flex items-center gap-1 text-gray-300\"><Lock size={10} /> Locked</span>\r\n                                </label>\r\n                                <div className=\"w-full bg-gray-100 border border-gray-100 rounded-xl px-4 py-2.5 text-sm font-bold text-gray-400 capitalize cursor-not-allowed select-none\">\r\n                                    {displayRole}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Save Button */}\r\n                        <div className=\"pt-2 border-t border-gray-50\">\r\n                            <button\r\n                                onClick={handleSaveProfile}\r\n                                disabled={isSaving}\r\n                                className=\"w-full bg-[#3E2723] text-white py-3.5 rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-[#5D4037] transition-all shadow-md active:scale-95 disabled:opacity-50 disabled:scale-100\"\r\n                            >\r\n                                {isSaving ? 'Saving...' : 'Save Changes'}\r\n                            </button>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n\r\n            {/* Sign Out */}\r\n            <div className=\"w-full max-w-sm\">\r\n                {!confirmSignOut ? (\r\n                    <button\r\n                        onClick={() => setConfirmSignOut(true)}\r\n                        className=\"w-full bg-white border-2 border-red-100 text-red-500 py-4 rounded-2xl font-black flex items-center justify-center gap-2 hover:bg-red-50 transition-all active:scale-95 shadow-sm\"\r\n                    >\r\n                        <LogOut size={20} /> Sign Out\r\n                    </button>\r\n                ) : (\r\n                    <div className=\"bg-white border-2 border-red-100 rounded-2xl p-4 space-y-3 shadow-sm\">\r\n                        <p className=\"text-center text-sm font-black text-[#3E2723]\">Sure you want to leave? ☕</p>\r\n                        <div className=\"flex gap-3\">\r\n                            <button\r\n                                onClick={() => setConfirmSignOut(false)}\r\n                                className=\"flex-1 py-3 rounded-xl border-2 border-gray-100 text-gray-500 font-black text-xs uppercase tracking-widest hover:bg-gray-50 transition-all active:scale-95\"\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                            <button\r\n                                onClick={handleSignOut}\r\n                                className=\"flex-1 py-3 rounded-xl bg-red-500 text-white font-black text-xs uppercase tracking-widest hover:bg-red-600 transition-all active:scale-95 flex items-center justify-center gap-2\"\r\n                            >\r\n                                <LogOut size={14} /> Yes, Sign Out\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"names":["Dashboard","user","signOut","useAuth","navigate","useNavigate","profile","setProfile","useState","loadingProfile","setLoadingProfile","isSaving","setIsSaving","confirmSignOut","setConfirmSignOut","formData","setFormData","name","hostel","useEffect","fetchProfile","async","data","supabase","from","select","eq","id","single","displayName","user_metadata","displayRole","role","_jsxs","className","children","_jsx","onClick","ArrowLeft","size","Coffee","_Fragment","charAt","toUpperCase","email","User","type","value","onChange","e","target","placeholder","Building2","Mail","Lock","Shield","trim","error","update","toast","success","console","disabled","replace","LogOut"],"sourceRoot":""}