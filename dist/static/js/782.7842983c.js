/*! For license information please see 782.7842983c.js.LICENSE.txt */
"use strict";(self.webpackChunknescafe_restaurant=self.webpackChunknescafe_restaurant||[]).push([[782],{2782(e,s,t){t.r(s),t.d(s,{default:()=>x});var a=t(6540),r=t(5570),l=t(8449),n=t(429),i=t(4905),o=t(1697),c=t(7078),d=t(3954),m=t(4848);const x=()=>{const e=(0,r.Zp)(),{user:s}=(0,n.A)(),[t,x]=(0,a.useState)({email:"",password:""}),[u,h]=(0,a.useState)(!1),[g,p]=(0,a.useState)(""),[f,b]=(0,a.useState)(!1),[y,w]=(0,a.useState)(null),[j,N]=(0,a.useState)(!1);(0,a.useEffect)(()=>{s&&e("/",{replace:!0})},[s,e]),(0,a.useEffect)(()=>{const e=localStorage.getItem("nescafe_user_metadata");if(e)try{const s=JSON.parse(e),t=6048e5,a=Date.now()-s.lastLogin<t;w(s),x(e=>({...e,email:s.email})),a&&b(!0)}catch(e){console.error("Error parsing metadata",e)}},[]);const v=e=>x(s=>({...s,[e.target.name]:e.target.value}));return(0,m.jsx)("div",{className:"min-h-screen bg-[#FFF8E1] flex items-center justify-center p-4",children:(0,m.jsxs)("div",{className:"w-full max-w-sm",children:[(0,m.jsxs)("div",{className:"text-center mb-8",children:[(0,m.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-[#3E2723] rounded-2xl mb-4 shadow-lg",children:(0,m.jsx)(i.A,{size:32,className:"text-[#D4AF37]"})}),(0,m.jsx)("h1",{className:"text-3xl font-black text-[#3E2723]",children:f?`Hi, ${y?.name}`:"Welcome Back"}),(0,m.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:f?"Sign in to continue your session":"Sign in to your Nescafe IITPKD account"})]}),(0,m.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-7 space-y-5 transition-all duration-500",children:[g&&(0,m.jsxs)("div",{className:"bg-red-50 border border-red-100 text-red-600 text-sm font-medium p-4 rounded-xl space-y-3",children:[(0,m.jsx)("p",{children:g}),g.includes("confirm your email first")&&(0,m.jsxs)("button",{onClick:async()=>{if(!t.email)return void toast.error("Enter your email first");N(!0);const{error:e}=await l.N.auth.resend({type:"signup",email:t.email});N(!1),e?toast.error(e.message):toast.success("Confirmation link sent!")},disabled:j,className:"w-full bg-white text-red-600 border border-red-200 py-2 rounded-lg text-xs font-bold hover:bg-red-50 transition-all flex items-center justify-center gap-2 active:scale-95 disabled:opacity-50",children:[j?(0,m.jsx)(o.A,{size:14,className:"animate-spin"}):(0,m.jsx)(d.A,{size:14}),j?"Resending...":"Resend Confirmation Email"]})]}),f?(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-2xl border-2 border-gray-100",children:[(0,m.jsx)("div",{className:"w-12 h-12 bg-[#3E2723] rounded-full flex items-center justify-center text-[#D4AF37] font-black text-lg",children:y?.name?.charAt(0)}),(0,m.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,m.jsx)("h3",{className:"text-sm font-black text-[#3E2723] truncate",children:y?.name}),(0,m.jsx)("p",{className:"text-xs text-gray-400 truncate",children:y?.email})]})]}),(0,m.jsx)("button",{onClick:()=>b(!1),className:"w-full bg-[#3E2723] text-white py-4 rounded-2xl font-black text-base hover:bg-[#5D4037] transition-all flex items-center justify-center gap-2 shadow-lg active:scale-90",children:"Sign In ☕"}),(0,m.jsx)("button",{onClick:()=>{localStorage.removeItem("nescafe_user_metadata"),localStorage.removeItem("sb-udzrvxwjakgwfbnatnbt-auth-token"),w(null),x({email:"",password:""}),b(!1)},className:"w-full text-xs font-bold text-gray-400 hover:text-[#3E2723] transition-colors",children:"Not you? Switch Account"})]}):(0,m.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),p(""),h(!0);const{error:s}=await l.N.auth.signInWithPassword({email:t.email,password:t.password});h(!1),s&&(s.message.includes("Email not confirmed")?p("Please check your inbox and confirm your email first."):s.message.includes("Invalid login credentials")?p("Wrong email or password. Try again."):p(s.message))},className:"space-y-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"text-xs font-black text-gray-400 uppercase tracking-wider block mb-1.5",children:"Email"}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)(d.A,{size:16,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-300"}),(0,m.jsx)("input",{type:"email",name:"email",value:t.email,onChange:v,required:!0,placeholder:"you@iitpkd.ac.in",className:"w-full pl-10 pr-4 py-3.5 rounded-2xl border-2 border-gray-100 focus:border-[#D4AF37] outline-none text-sm font-medium transition-all"})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"text-xs font-black text-gray-400 uppercase tracking-wider block mb-1.5",children:"Password"}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)(c.A,{size:16,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-300"}),(0,m.jsx)("input",{type:"password",name:"password",value:t.password,onChange:v,required:!0,autoFocus:!!t.email,placeholder:"Your password",className:"w-full pl-10 pr-4 py-3.5 rounded-2xl border-2 border-gray-100 focus:border-[#D4AF37] outline-none text-sm font-medium transition-all"})]})]}),(0,m.jsx)("button",{type:"submit",disabled:u,className:"w-full bg-[#3E2723] text-white py-4 rounded-2xl font-black text-base hover:bg-[#5D4037] transition-all flex items-center justify-center gap-2 shadow-lg active:scale-90 disabled:opacity-60 disabled:cursor-not-allowed",children:u?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(o.A,{size:20,className:"animate-spin"})," Signing in..."]}):"Sign In ☕"})]}),(0,m.jsxs)("p",{className:"text-center text-sm text-gray-400",children:["Don't have an account?"," ",(0,m.jsx)(r.N_,{to:"/signup",className:"font-bold text-[#3E2723] hover:text-[#D4AF37] transition-colors",children:"Sign Up"})]})]})]})})}},1697(e,s,t){t.d(s,{A:()=>a});const a=(0,t(4207).A)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7078(e,s,t){t.d(s,{A:()=>a});const a=(0,t(4207).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])}}]);
//# sourceMappingURL=782.7842983c.js.map