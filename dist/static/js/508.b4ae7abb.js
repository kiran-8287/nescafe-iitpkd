"use strict";(self.webpackChunknescafe_restaurant=self.webpackChunknescafe_restaurant||[]).push([[508],{4508(e,s,t){t.r(s),t.d(s,{default:()=>b});var a=t(6540),l=t(5570),r=t(6485),n=t(665),i=t(2762),o=t(322),c=t(4905),d=t(1697),m=t(7078),x=t(3954),u=t(8686),p=t(4848);const h=["student","staff","professor"],b=()=>{(0,l.Zp)();const[e,s]=(0,a.useState)({name:"",email:"",password:"",role:"student",hostel:""}),[t,b]=(0,a.useState)(!1),[g,f]=(0,a.useState)(""),[j,y]=(0,a.useState)(!1),N=e=>s(s=>({...s,[e.target.name]:e.target.value})),[w,v]=(0,a.useState)(!1);return j?(0,p.jsx)("div",{className:"min-h-screen bg-[#FFF8E1] flex items-center justify-center p-6",children:(0,p.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-10 text-center max-w-sm w-full",children:[(0,p.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-5",children:(0,p.jsx)(o.A,{size:40,className:"text-green-500"})}),(0,p.jsx)("h2",{className:"text-2xl font-black text-[#3E2723] mb-2",children:"Check Your Email!"}),(0,p.jsxs)("p",{className:"text-gray-500 text-sm leading-relaxed",children:["We sent a confirmation link to ",(0,p.jsx)("span",{className:"font-bold text-[#3E2723]",children:e.email}),". Confirm it, then sign in."]}),(0,p.jsxs)("div",{className:"space-y-3",children:[(0,p.jsx)(l.N_,{to:"/login",className:"inline-block w-full bg-[#3E2723] text-white py-3.5 rounded-2xl font-bold text-center hover:bg-[#5D4037] transition-all shadow-md active:scale-95",children:"Go to Sign In"}),(0,p.jsxs)("button",{onClick:async()=>{v(!0);const{error:s}=await r.N.auth.resend({type:"signup",email:e.email});v(!1),s?toast.error(s.message):toast.success("Confirmation link sent! Check your inbox (or spam).")},disabled:w,className:"w-full bg-white text-[#3E2723] border-2 border-[#3E2723] py-3.5 rounded-2xl font-bold text-center hover:bg-[#FFF8E1] transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-2",children:[w?(0,p.jsx)(d.A,{size:16,className:"animate-spin"}):(0,p.jsx)(x.A,{size:16}),w?"Resending...":"Resend Email"]})]})]})}):(0,p.jsx)("div",{className:"min-h-screen bg-[#FFF8E1] flex items-center justify-center p-4",children:(0,p.jsxs)("div",{className:"w-full max-w-sm",children:[(0,p.jsxs)("div",{className:"text-center mb-8",children:[(0,p.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-[#3E2723] rounded-2xl mb-4 shadow-lg",children:(0,p.jsx)(c.A,{size:32,className:"text-[#D4AF37]"})}),(0,p.jsx)("h1",{className:"text-3xl font-black text-[#3E2723]",children:"Join the Brew"}),(0,p.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Create your Nescafe IITPKD account"})]}),(0,p.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-7 space-y-5",children:[g&&(0,p.jsx)("div",{className:"bg-red-50 border border-red-100 text-red-600 text-sm font-medium p-3 rounded-xl",children:g}),(0,p.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),f(""),b(!0),e.password.length<6)return f("Password must be at least 6 characters."),void b(!1);const t=e.email.toLowerCase();if("student"===e.role&&!t.endsWith("@smail.iitpkd.ac.in"))return f("Students must use their @smail.iitpkd.ac.in email."),void b(!1);try{console.log("Attempting sign up for:",e.email);const{data:s,error:t}=await r.N.auth.signUp({email:e.email,password:e.password,options:{data:{name:e.name,role:e.role,hostel:e.hostel}}});b(!1),t?(console.error("Supabase Sign Up Error:",t),f(t.message)):(console.log("Sign Up Success:",s),y(!0))}catch(e){b(!1),console.error("Caught Exception during Sign Up:",e),f(e.message||"An unexpected error occurred. Please check your connection.")}},className:"space-y-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"text-xs font-black text-gray-400 uppercase tracking-wider block mb-1.5",children:"Full Name"}),(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)(u.A,{size:16,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-300"}),(0,p.jsx)("input",{type:"text",name:"name",value:e.name,onChange:N,required:!0,placeholder:"Your full name",className:"w-full pl-10 pr-4 py-3.5 rounded-2xl border-2 border-gray-100 focus:border-[#D4AF37] outline-none text-sm font-medium transition-all"})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"text-xs font-black text-gray-400 uppercase tracking-wider block mb-1.5",children:"Email"}),(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)(x.A,{size:16,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-300"}),(0,p.jsx)("input",{type:"email",name:"email",value:e.email,onChange:N,required:!0,placeholder:"student"===e.role?"you@smail.iitpkd.ac.in":"you@example.com",className:"w-full pl-10 pr-4 py-3.5 rounded-2xl border-2 border-gray-100 focus:border-[#D4AF37] outline-none text-sm font-medium transition-all"})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"text-xs font-black text-gray-400 uppercase tracking-wider block mb-1.5",children:"Password"}),(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)(m.A,{size:16,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-300"}),(0,p.jsx)("input",{type:"password",name:"password",value:e.password,onChange:N,required:!0,placeholder:"Min. 6 characters",className:"w-full pl-10 pr-4 py-3.5 rounded-2xl border-2 border-gray-100 focus:border-[#D4AF37] outline-none text-sm font-medium transition-all"})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"text-xs font-black text-gray-400 uppercase tracking-wider block mb-1.5",children:"Role"}),(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)(n.A,{size:16,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-300"}),(0,p.jsx)("select",{name:"role",value:e.role,onChange:N,className:"w-full pl-10 pr-4 py-3.5 rounded-2xl border-2 border-gray-100 focus:border-[#D4AF37] outline-none text-sm font-medium transition-all appearance-none bg-white font-bold",children:h.map(e=>(0,p.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"text-xs font-black text-gray-400 uppercase tracking-wider block mb-1.5",children:["Hostel / Block ",(0,p.jsx)("span",{className:"text-gray-300 normal-case font-medium",children:"(optional)"})]}),(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)(i.A,{size:16,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-300"}),(0,p.jsx)("input",{type:"text",name:"hostel",value:e.hostel,onChange:N,placeholder:"e.g. Block A",className:"w-full pl-10 pr-4 py-3.5 rounded-2xl border-2 border-gray-100 focus:border-[#D4AF37] outline-none text-sm font-medium transition-all"})]})]}),(0,p.jsx)("button",{type:"submit",disabled:t,className:"w-full bg-[#3E2723] text-white py-4 rounded-2xl font-black text-base hover:bg-[#5D4037] transition-all flex items-center justify-center gap-2 shadow-lg active:scale-90 disabled:opacity-60 disabled:cursor-not-allowed",children:t?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.A,{size:20,className:"animate-spin"})," Creating account..."]}):"Create Account â˜•"})]}),(0,p.jsxs)("p",{className:"text-center text-sm text-gray-400",children:["Already have an account?"," ",(0,p.jsx)(l.N_,{to:"/login",className:"font-bold text-[#3E2723] hover:text-[#D4AF37] transition-colors",children:"Sign In"})]})]})]})})}}}]);
//# sourceMappingURL=508.b4ae7abb.js.map