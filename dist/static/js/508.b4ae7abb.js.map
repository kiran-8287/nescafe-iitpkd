{"version":3,"file":"static/js/508.b4ae7abb.js","mappings":"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","sources":["webpack://nescafe-restaurant/./src/components/SignUpPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { supabase } from '../supabaseClient';\r\nimport { Coffee, Mail, Lock, User, Building2, BookOpen, Loader2, CheckCircle } from 'lucide-react';\r\n\r\nconst ROLES = ['student', 'staff', 'professor'];\r\n\r\nconst SignUpPage = () => {\r\n    const navigate = useNavigate();\r\n    const [form, setForm] = useState({ name: '', email: '', password: '', role: 'student', hostel: '' });\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [success, setSuccess] = useState(false);\r\n\r\n    const handleChange = (e) => setForm(prev => ({ ...prev, [e.target.name]: e.target.value }));\r\n    const [resending, setResending] = useState(false);\r\n\r\n    const handleResend = async () => {\r\n        setResending(true);\r\n        const { error: resendError } = await supabase.auth.resend({\r\n            type: 'signup',\r\n            email: form.email,\r\n        });\r\n        setResending(false);\r\n        if (resendError) {\r\n            toast.error(resendError.message);\r\n        } else {\r\n            toast.success('Confirmation link sent! Check your inbox (or spam).');\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setLoading(true);\r\n\r\n        if (form.password.length < 6) {\r\n            setError('Password must be at least 6 characters.');\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        const emailLower = form.email.toLowerCase();\r\n\r\n        // Institutional email validation\r\n        if (form.role === 'student' && !emailLower.endsWith('@smail.iitpkd.ac.in')) {\r\n            setError('Students must use their @smail.iitpkd.ac.in email.');\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        // Removed validation for staff and professors as per user request\r\n\r\n        try {\r\n            console.log('Attempting sign up for:', form.email);\r\n            const { data, error: signUpError } = await supabase.auth.signUp({\r\n                email: form.email,\r\n                password: form.password,\r\n                options: {\r\n                    data: {\r\n                        name: form.name,\r\n                        role: form.role,\r\n                        hostel: form.hostel,\r\n                    }\r\n                }\r\n            });\r\n\r\n            setLoading(false);\r\n\r\n            if (signUpError) {\r\n                console.error('Supabase Sign Up Error:', signUpError);\r\n                setError(signUpError.message);\r\n            } else {\r\n                console.log('Sign Up Success:', data);\r\n                setSuccess(true);\r\n            }\r\n        } catch (err) {\r\n            setLoading(false);\r\n            console.error('Caught Exception during Sign Up:', err);\r\n            setError(err.message || 'An unexpected error occurred. Please check your connection.');\r\n        }\r\n    };\r\n\r\n    if (success) {\r\n        return (\r\n            <div className=\"min-h-screen bg-[#FFF8E1] flex items-center justify-center p-6\">\r\n                <div className=\"bg-white rounded-3xl shadow-xl p-10 text-center max-w-sm w-full\">\r\n                    <div className=\"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-5\">\r\n                        <CheckCircle size={40} className=\"text-green-500\" />\r\n                    </div>\r\n                    <h2 className=\"text-2xl font-black text-[#3E2723] mb-2\">Check Your Email!</h2>\r\n                    <p className=\"text-gray-500 text-sm leading-relaxed\">\r\n                        We sent a confirmation link to <span className=\"font-bold text-[#3E2723]\">{form.email}</span>.\r\n                        Confirm it, then sign in.\r\n                    </p>\r\n                    <div className=\"space-y-3\">\r\n                        <Link\r\n                            to=\"/login\"\r\n                            className=\"inline-block w-full bg-[#3E2723] text-white py-3.5 rounded-2xl font-bold text-center hover:bg-[#5D4037] transition-all shadow-md active:scale-95\"\r\n                        >\r\n                            Go to Sign In\r\n                        </Link>\r\n                        <button\r\n                            onClick={handleResend}\r\n                            disabled={resending}\r\n                            className=\"w-full bg-white text-[#3E2723] border-2 border-[#3E2723] py-3.5 rounded-2xl font-bold text-center hover:bg-[#FFF8E1] transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-2\"\r\n                        >\r\n                            {resending ? <Loader2 size={16} className=\"animate-spin\" /> : <Mail size={16} />}\r\n                            {resending ? 'Resending...' : 'Resend Email'}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#FFF8E1] flex items-center justify-center p-4\">\r\n            <div className=\"w-full max-w-sm\">\r\n                {/* Header */}\r\n                <div className=\"text-center mb-8\">\r\n                    <div className=\"inline-flex items-center justify-center w-16 h-16 bg-[#3E2723] rounded-2xl mb-4 shadow-lg\">\r\n                        <Coffee size={32} className=\"text-[#D4AF37]\" />\r\n                    </div>\r\n                    <h1 className=\"text-3xl font-black text-[#3E2723]\">Join the Brew</h1>\r\n                    <p className=\"text-gray-500 text-sm mt-1\">Create your Nescafe IITPKD account</p>\r\n                </div>\r\n\r\n                {/* Card */}\r\n                <div className=\"bg-white rounded-3xl shadow-xl p-7 space-y-5\">\r\n                    {error && (\r\n                        <div className=\"bg-red-50 border border-red-100 text-red-600 text-sm font-medium p-3 rounded-xl\">\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                        {/* Name */}\r\n                        <div>\r\n                            <label className=\"text-xs font-black text-gray-400 uppercase tracking-wider block mb-1.5\">Full Name</label>\r\n                            <div className=\"relative\">\r\n                                <User size={16} className=\"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-300\" />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"name\"\r\n                                    value={form.name}\r\n                                    onChange={handleChange}\r\n                                    required\r\n                                    placeholder=\"Your full name\"\r\n                                    className=\"w-full pl-10 pr-4 py-3.5 rounded-2xl border-2 border-gray-100 focus:border-[#D4AF37] outline-none text-sm font-medium transition-all\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Email */}\r\n                        <div>\r\n                            <label className=\"text-xs font-black text-gray-400 uppercase tracking-wider block mb-1.5\">Email</label>\r\n                            <div className=\"relative\">\r\n                                <Mail size={16} className=\"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-300\" />\r\n                                <input\r\n                                    type=\"email\"\r\n                                    name=\"email\"\r\n                                    value={form.email}\r\n                                    onChange={handleChange}\r\n                                    required\r\n                                    placeholder={form.role === 'student' ? 'you@smail.iitpkd.ac.in' : 'you@example.com'}\r\n                                    className=\"w-full pl-10 pr-4 py-3.5 rounded-2xl border-2 border-gray-100 focus:border-[#D4AF37] outline-none text-sm font-medium transition-all\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Password */}\r\n                        <div>\r\n                            <label className=\"text-xs font-black text-gray-400 uppercase tracking-wider block mb-1.5\">Password</label>\r\n                            <div className=\"relative\">\r\n                                <Lock size={16} className=\"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-300\" />\r\n                                <input\r\n                                    type=\"password\"\r\n                                    name=\"password\"\r\n                                    value={form.password}\r\n                                    onChange={handleChange}\r\n                                    required\r\n                                    placeholder=\"Min. 6 characters\"\r\n                                    className=\"w-full pl-10 pr-4 py-3.5 rounded-2xl border-2 border-gray-100 focus:border-[#D4AF37] outline-none text-sm font-medium transition-all\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Role */}\r\n                        <div>\r\n                            <label className=\"text-xs font-black text-gray-400 uppercase tracking-wider block mb-1.5\">Role</label>\r\n                            <div className=\"relative\">\r\n                                <BookOpen size={16} className=\"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-300\" />\r\n                                <select\r\n                                    name=\"role\"\r\n                                    value={form.role}\r\n                                    onChange={handleChange}\r\n                                    className=\"w-full pl-10 pr-4 py-3.5 rounded-2xl border-2 border-gray-100 focus:border-[#D4AF37] outline-none text-sm font-medium transition-all appearance-none bg-white font-bold\"\r\n                                >\r\n                                    {ROLES.map(r => (\r\n                                        <option key={r} value={r}>{r.charAt(0).toUpperCase() + r.slice(1)}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Hostel */}\r\n                        <div>\r\n                            <label className=\"text-xs font-black text-gray-400 uppercase tracking-wider block mb-1.5\">Hostel / Block <span className=\"text-gray-300 normal-case font-medium\">(optional)</span></label>\r\n                            <div className=\"relative\">\r\n                                <Building2 size={16} className=\"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-300\" />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"hostel\"\r\n                                    value={form.hostel}\r\n                                    onChange={handleChange}\r\n                                    placeholder=\"e.g. Block A\"\r\n                                    className=\"w-full pl-10 pr-4 py-3.5 rounded-2xl border-2 border-gray-100 focus:border-[#D4AF37] outline-none text-sm font-medium transition-all\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={loading}\r\n                            className=\"w-full bg-[#3E2723] text-white py-4 rounded-2xl font-black text-base hover:bg-[#5D4037] transition-all flex items-center justify-center gap-2 shadow-lg active:scale-90 disabled:opacity-60 disabled:cursor-not-allowed\"\r\n                        >\r\n                            {loading ? (\r\n                                <><Loader2 size={20} className=\"animate-spin\" /> Creating account...</>\r\n                            ) : (\r\n                                'Create Account â˜•'\r\n                            )}\r\n                        </button>\r\n                    </form>\r\n\r\n                    <p className=\"text-center text-sm text-gray-400\">\r\n                        Already have an account?{' '}\r\n                        <Link to=\"/login\" className=\"font-bold text-[#3E2723] hover:text-[#D4AF37] transition-colors\">\r\n                            Sign In\r\n                        </Link>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SignUpPage;\r\n"],"names":["ROLES","SignUpPage","useNavigate","form","setForm","useState","name","email","password","role","hostel","loading","setLoading","error","setError","success","setSuccess","handleChange","e","prev","target","value","resending","setResending","_jsx","className","children","_jsxs","CheckCircle","size","Link","to","onClick","async","resendError","supabase","auth","resend","type","toast","message","disabled","Loader2","Mail","Coffee","onSubmit","preventDefault","length","emailLower","toLowerCase","endsWith","console","log","data","signUpError","signUp","options","err","User","onChange","required","placeholder","Lock","BookOpen","map","r","charAt","toUpperCase","slice","Building2","_Fragment"],"sourceRoot":""}