/*! For license information please see 33.160644a4.js.LICENSE.txt */
"use strict";(self.webpackChunknescafe_restaurant=self.webpackChunknescafe_restaurant||[]).push([[33],{3033(e,s,a){a.r(s),a.d(s,{default:()=>f});var t=a(6540),l=a(5570),r=a(429),c=a(8449),n=a(232),i=a(4905),d=a(8686),o=a(2762),x=a(3954),m=a(7078),h=a(4207);const u=(0,h.A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),p=(0,h.A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var g=a(888),y=a(4848);const f=()=>{const{user:e,signOut:s}=(0,r.A)(),a=(0,l.Zp)(),[h,f]=(0,t.useState)(null),[b,j]=(0,t.useState)(!0),[k,N]=(0,t.useState)(!1),[v,w]=(0,t.useState)(!1),[A,F]=(0,t.useState)({name:"",hostel:""});(0,t.useEffect)(()=>{e&&z()},[e]);const z=async()=>{const{data:s}=await c.N.from("users").select("*").eq("id",e.id).single();s&&(f(s),F({name:s.name||"",hostel:s.hostel||""})),j(!1)},C=h?.name||e?.user_metadata?.name||"Coffee Lover",S=h?.role||e?.user_metadata?.role||"student";return(0,y.jsxs)("div",{className:"min-h-screen bg-[#FFF8E1] flex flex-col items-center justify-center p-6 font-sans",children:[(0,y.jsx)("div",{className:"w-full max-w-sm mb-2",children:(0,y.jsxs)("button",{onClick:()=>a(-1),className:"flex items-center gap-2 text-[#3E2723] text-xs font-black uppercase tracking-widest hover:text-[#D4AF37] transition-colors",children:[(0,y.jsx)(n.A,{size:16})," Back"]})}),(0,y.jsxs)("div",{className:"text-center mb-8",children:[(0,y.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-[#3E2723] rounded-2xl mb-4 shadow-lg",children:(0,y.jsx)(i.A,{size:32,className:"text-[#D4AF37]"})}),(0,y.jsx)("h1",{className:"text-3xl font-black text-[#3E2723]",children:"Your Brew Hub"}),(0,y.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Nescafe IITPKD — Member Dashboard"})]}),(0,y.jsx)("div",{className:"bg-white rounded-3xl shadow-xl p-7 w-full max-w-sm space-y-5 mb-5",children:b?(0,y.jsx)("div",{className:"text-center text-gray-400 py-4 animate-pulse",children:"Loading your profile..."}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"flex items-center gap-4",children:[(0,y.jsx)("div",{className:"w-14 h-14 bg-[#FFF8E1] border-2 border-[#D4AF37]/30 rounded-2xl flex items-center justify-center flex-shrink-0",children:(0,y.jsx)("span",{className:"text-2xl font-black text-[#3E2723]",children:C.charAt(0).toUpperCase()})}),(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{className:"font-black text-[#3E2723] text-lg leading-tight",children:C}),(0,y.jsx)("p",{className:"text-xs text-gray-400 font-medium",children:e?.email})]})]}),(0,y.jsx)("div",{className:"h-px bg-gray-100"}),(0,y.jsxs)("div",{className:"space-y-4 pt-1",children:[(0,y.jsxs)("div",{className:"space-y-1.5",children:[(0,y.jsxs)("label",{className:"flex items-center gap-2 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:[(0,y.jsx)(d.A,{size:12,className:"text-[#D4AF37]"})," Full Name"]}),(0,y.jsx)("input",{type:"text",value:A.name,onChange:e=>F({...A,name:e.target.value}),placeholder:"Your Name",className:"w-full bg-gray-50 border border-gray-100 rounded-xl px-4 py-2.5 text-sm font-bold text-[#3E2723] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all"})]}),(0,y.jsxs)("div",{className:"space-y-1.5",children:[(0,y.jsxs)("label",{className:"flex items-center gap-2 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:[(0,y.jsx)(o.A,{size:12,className:"text-[#D4AF37]"})," Hostel / Block"]}),(0,y.jsx)("input",{type:"text",value:A.hostel,onChange:e=>F({...A,hostel:e.target.value}),placeholder:"e.g. Block A, Room 101",className:"w-full bg-gray-50 border border-gray-100 rounded-xl px-4 py-2.5 text-sm font-bold text-[#3E2723] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all"})]}),(0,y.jsxs)("div",{className:"space-y-1.5",children:[(0,y.jsxs)("label",{className:"flex items-center gap-2 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:[(0,y.jsx)(x.A,{size:12,className:"text-gray-400"})," Email Address",(0,y.jsxs)("span",{className:"ml-auto flex items-center gap-1 text-gray-300",children:[(0,y.jsx)(m.A,{size:10})," Locked"]})]}),(0,y.jsx)("div",{className:"w-full bg-gray-100 border border-gray-100 rounded-xl px-4 py-2.5 text-sm font-bold text-gray-400 cursor-not-allowed select-none",children:e?.email})]}),(0,y.jsxs)("div",{className:"space-y-1.5",children:[(0,y.jsxs)("label",{className:"flex items-center gap-2 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:[(0,y.jsx)(u,{size:12,className:"text-gray-400"})," Role",(0,y.jsxs)("span",{className:"ml-auto flex items-center gap-1 text-gray-300",children:[(0,y.jsx)(m.A,{size:10})," Locked"]})]}),(0,y.jsx)("div",{className:"w-full bg-gray-100 border border-gray-100 rounded-xl px-4 py-2.5 text-sm font-bold text-gray-400 capitalize cursor-not-allowed select-none",children:S})]})]}),(0,y.jsx)("div",{className:"pt-2 border-t border-gray-50",children:(0,y.jsx)("button",{onClick:async()=>{if(A.name.trim()){N(!0);try{const{error:s}=await c.N.from("users").update({name:A.name,hostel:A.hostel}).eq("id",e.id);if(s)throw s;g.Ay.success("Profile updated! Looking sharp."),z()}catch(e){console.error("Update error:",e),g.Ay.error("Failed to update. Maybe the caffeine hasn't kicked in.")}finally{N(!1)}}else g.Ay.error("Name cannot be empty!")},disabled:k,className:"w-full bg-[#3E2723] text-white py-3.5 rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-[#5D4037] transition-all shadow-md active:scale-95 disabled:opacity-50 disabled:scale-100",children:k?"Saving...":"Save Changes"})})]})}),(0,y.jsx)("div",{className:"w-full max-w-sm",children:v?(0,y.jsxs)("div",{className:"bg-white border-2 border-red-100 rounded-2xl p-4 space-y-3 shadow-sm",children:[(0,y.jsx)("p",{className:"text-center text-sm font-black text-[#3E2723]",children:"Sure you want to leave? ☕"}),(0,y.jsxs)("div",{className:"flex gap-3",children:[(0,y.jsx)("button",{onClick:()=>w(!1),className:"flex-1 py-3 rounded-xl border-2 border-gray-100 text-gray-500 font-black text-xs uppercase tracking-widest hover:bg-gray-50 transition-all active:scale-95",children:"Cancel"}),(0,y.jsxs)("button",{onClick:async()=>{try{await s(),g.Ay.success("Signed out successfully. See you soon! ☕"),a("/login",{replace:!0})}catch(e){g.Ay.error("Sign out failed, but clearing local session."),a("/login",{replace:!0})}},className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-black text-xs uppercase tracking-widest hover:bg-red-600 transition-all active:scale-95 flex items-center justify-center gap-2",children:[(0,y.jsx)(p,{size:14})," Yes, Sign Out"]})]})]}):(0,y.jsxs)("button",{onClick:()=>w(!0),className:"w-full bg-white border-2 border-red-100 text-red-500 py-4 rounded-2xl font-black flex items-center justify-center gap-2 hover:bg-red-50 transition-all active:scale-95 shadow-sm",children:[(0,y.jsx)(p,{size:20})," Sign Out"]})})]})}},2762(e,s,a){a.d(s,{A:()=>t});const t=(0,a(4207).A)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},7078(e,s,a){a.d(s,{A:()=>t});const t=(0,a(4207).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])}}]);
//# sourceMappingURL=33.160644a4.js.map