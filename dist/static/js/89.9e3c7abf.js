"use strict";(self.webpackChunknescafe_restaurant=self.webpackChunknescafe_restaurant||[]).push([[89],{9089(e,s,t){t.r(s),t.d(s,{default:()=>b});var a=t(6540),l=t(5570),r=t(429),c=t(6485),n=t(232),i=t(2762),o=t(4905),d=t(7078),x=t(5042),m=t(3954),u=t(2492),g=t(8686),p=t(888),h=t(4848);const b=()=>{const{user:e,signOut:s}=(0,r.A)(),t=(0,l.Zp)(),[b,f]=(0,a.useState)(null),[y,j]=(0,a.useState)(!0),[N,w]=(0,a.useState)(!1),[k,v]=(0,a.useState)(!1),[A,F]=(0,a.useState)({name:"",hostel:""});(0,a.useEffect)(()=>{e&&C()},[e]);const C=async()=>{const{data:s}=await c.N.from("users").select("*").eq("id",e.id).single();s&&(f(s),F({name:s.name||"",hostel:s.hostel||""})),j(!1)},E=b?.name||e?.user_metadata?.name||"Coffee Lover",S=b?.role||e?.user_metadata?.role||"student";return(0,h.jsxs)("div",{className:"min-h-screen bg-[#FFF8E1] flex flex-col items-center justify-center p-6 font-sans",children:[(0,h.jsx)("div",{className:"w-full max-w-sm mb-2",children:(0,h.jsxs)("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-[#3E2723] text-xs font-black uppercase tracking-widest hover:text-[#D4AF37] transition-colors",children:[(0,h.jsx)(n.A,{size:16})," Back"]})}),(0,h.jsxs)("div",{className:"text-center mb-8",children:[(0,h.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-[#3E2723] rounded-2xl mb-4 shadow-lg",children:(0,h.jsx)(o.A,{size:32,className:"text-[#D4AF37]"})}),(0,h.jsx)("h1",{className:"text-3xl font-black text-[#3E2723]",children:"Your Brew Hub"}),(0,h.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Nescafe IITPKD — Member Dashboard"})]}),(0,h.jsx)("div",{className:"bg-white rounded-3xl shadow-xl p-7 w-full max-w-sm space-y-5 mb-5",children:y?(0,h.jsx)("div",{className:"text-center text-gray-400 py-4 animate-pulse",children:"Loading your profile..."}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[(0,h.jsx)("div",{className:"w-14 h-14 bg-[#FFF8E1] border-2 border-[#D4AF37]/30 rounded-2xl flex items-center justify-center flex-shrink-0",children:(0,h.jsx)("span",{className:"text-2xl font-black text-[#3E2723]",children:E.charAt(0).toUpperCase()})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"font-black text-[#3E2723] text-lg leading-tight",children:E}),(0,h.jsx)("p",{className:"text-xs text-gray-400 font-medium",children:e?.email})]})]}),(0,h.jsx)("div",{className:"h-px bg-gray-100"}),(0,h.jsxs)("div",{className:"space-y-4 pt-1",children:[(0,h.jsxs)("div",{className:"space-y-1.5",children:[(0,h.jsxs)("label",{className:"flex items-center gap-2 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:[(0,h.jsx)(g.A,{size:12,className:"text-[#D4AF37]"})," Full Name"]}),(0,h.jsx)("input",{type:"text",value:A.name,onChange:e=>F({...A,name:e.target.value}),placeholder:"Your Name",className:"w-full bg-gray-50 border border-gray-100 rounded-xl px-4 py-2.5 text-sm font-bold text-[#3E2723] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all"})]}),(0,h.jsxs)("div",{className:"space-y-1.5",children:[(0,h.jsxs)("label",{className:"flex items-center gap-2 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:[(0,h.jsx)(i.A,{size:12,className:"text-[#D4AF37]"})," Hostel / Block"]}),(0,h.jsx)("input",{type:"text",value:A.hostel,onChange:e=>F({...A,hostel:e.target.value}),placeholder:"e.g. Block A, Room 101",className:"w-full bg-gray-50 border border-gray-100 rounded-xl px-4 py-2.5 text-sm font-bold text-[#3E2723] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all"})]}),(0,h.jsxs)("div",{className:"space-y-1.5",children:[(0,h.jsxs)("label",{className:"flex items-center gap-2 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:[(0,h.jsx)(m.A,{size:12,className:"text-gray-400"})," Email Address",(0,h.jsxs)("span",{className:"ml-auto flex items-center gap-1 text-gray-300",children:[(0,h.jsx)(d.A,{size:10})," Locked"]})]}),(0,h.jsx)("div",{className:"w-full bg-gray-100 border border-gray-100 rounded-xl px-4 py-2.5 text-sm font-bold text-gray-400 cursor-not-allowed select-none",children:e?.email})]}),(0,h.jsxs)("div",{className:"space-y-1.5",children:[(0,h.jsxs)("label",{className:"flex items-center gap-2 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:[(0,h.jsx)(u.A,{size:12,className:"text-gray-400"})," Role",(0,h.jsxs)("span",{className:"ml-auto flex items-center gap-1 text-gray-300",children:[(0,h.jsx)(d.A,{size:10})," Locked"]})]}),(0,h.jsx)("div",{className:"w-full bg-gray-100 border border-gray-100 rounded-xl px-4 py-2.5 text-sm font-bold text-gray-400 capitalize cursor-not-allowed select-none",children:S})]})]}),(0,h.jsx)("div",{className:"pt-2 border-t border-gray-50",children:(0,h.jsx)("button",{onClick:async()=>{if(A.name.trim()){w(!0);try{const{error:s}=await c.N.from("users").update({name:A.name,hostel:A.hostel}).eq("id",e.id);if(s)throw s;p.Ay.success("Profile updated! Looking sharp."),C()}catch(e){console.error("Update error:",e),p.Ay.error("Failed to update. Maybe the caffeine hasn't kicked in.")}finally{w(!1)}}else p.Ay.error("Name cannot be empty!")},disabled:N,className:"w-full bg-[#3E2723] text-white py-3.5 rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-[#5D4037] transition-all shadow-md active:scale-95 disabled:opacity-50 disabled:scale-100",children:N?"Saving...":"Save Changes"})})]})}),(0,h.jsx)("div",{className:"w-full max-w-sm",children:k?(0,h.jsxs)("div",{className:"bg-white border-2 border-red-100 rounded-2xl p-4 space-y-3 shadow-sm",children:[(0,h.jsx)("p",{className:"text-center text-sm font-black text-[#3E2723]",children:"Sure you want to leave? ☕"}),(0,h.jsxs)("div",{className:"flex gap-3",children:[(0,h.jsx)("button",{onClick:()=>v(!1),className:"flex-1 py-3 rounded-xl border-2 border-gray-100 text-gray-500 font-black text-xs uppercase tracking-widest hover:bg-gray-50 transition-all active:scale-95",children:"Cancel"}),(0,h.jsxs)("button",{onClick:async()=>{try{await s(),p.Ay.success("Signed out successfully. See you soon! ☕"),t("/login",{replace:!0})}catch(e){p.Ay.error("Sign out failed, but clearing local session."),t("/login",{replace:!0})}},className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-black text-xs uppercase tracking-widest hover:bg-red-600 transition-all active:scale-95 flex items-center justify-center gap-2",children:[(0,h.jsx)(x.A,{size:14})," Yes, Sign Out"]})]})]}):(0,h.jsxs)("button",{onClick:()=>v(!0),className:"w-full bg-white border-2 border-red-100 text-red-500 py-4 rounded-2xl font-black flex items-center justify-center gap-2 hover:bg-red-50 transition-all active:scale-95 shadow-sm",children:[(0,h.jsx)(x.A,{size:20})," Sign Out"]})})]})}}}]);
//# sourceMappingURL=89.9e3c7abf.js.map