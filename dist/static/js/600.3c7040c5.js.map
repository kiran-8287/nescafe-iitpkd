{"version":3,"file":"static/js/600.3c7040c5.js","mappings":"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","sources":["webpack://nescafe-restaurant/./src/components/OrderConfirmPage.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\r\nimport { motion } from 'framer-motion';\r\nimport { Check, ArrowRight, MapPin, Clock } from 'lucide-react';\r\nimport confetti from 'canvas-confetti';\r\nimport { useCart } from '../context/CartContext';\r\nimport { supabase } from '../supabaseClient';\r\nimport toast from 'react-hot-toast';\r\nimport coffeeVideo from '../videos/coffee.mp4';\r\n\r\nconst OrderConfirmPage = () => {\r\n    const { clearCart } = useCart();\r\n    const location = useLocation();\r\n    const [order, setOrder] = React.useState(null);\r\n    const [loading, setLoading] = React.useState(true);\r\n\r\n    // Get State from navigation\r\n    const { orderId, orderMode: initialMode, hostelDetails: initialHostel } = location.state || {};\r\n\r\n    useEffect(() => {\r\n        // Clear cart on mount\r\n        clearCart();\r\n\r\n        if (orderId) {\r\n            fetchOrder();\r\n            // Subscribe to status changes\r\n            const subscription = supabase\r\n                .channel(`order-${orderId}`)\r\n                .on('postgres_changes', {\r\n                    event: 'UPDATE',\r\n                    schema: 'public',\r\n                    table: 'orders',\r\n                    filter: `id=eq.${orderId}`\r\n                }, (payload) => {\r\n                    setOrder(payload.new);\r\n                    toast.success(`Order Status: ${payload.new.status.toUpperCase()}!`, { icon: '☕' });\r\n                })\r\n                .subscribe();\r\n\r\n            return () => {\r\n                supabase.removeChannel(subscription);\r\n            };\r\n        }\r\n\r\n        // Trigger Confetti\r\n        const duration = 2000;\r\n        const end = Date.now() + duration;\r\n\r\n        const frame = () => {\r\n            confetti({\r\n                particleCount: 2,\r\n                angle: 60,\r\n                spread: 55,\r\n                origin: { x: 0 },\r\n                colors: ['#3E2723', '#D4AF37', '#FFF8E1']\r\n            });\r\n            confetti({\r\n                particleCount: 2,\r\n                angle: 120,\r\n                spread: 55,\r\n                origin: { x: 1 },\r\n                colors: ['#3E2723', '#D4AF37', '#FFF8E1']\r\n            });\r\n\r\n            if (Date.now() < end) {\r\n                requestAnimationFrame(frame);\r\n            }\r\n        };\r\n        frame();\r\n\r\n        // Haptic\r\n        if (navigator.vibrate) try { navigator.vibrate([10, 50, 10]); } catch (e) { }\r\n\r\n    }, [orderId]);\r\n\r\n    const fetchOrder = async () => {\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('orders')\r\n                .select('*')\r\n                .eq('id', orderId)\r\n                .single();\r\n            if (error) throw error;\r\n            setOrder(data);\r\n        } catch (e) {\r\n            console.error('Error fetching order:', e);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#3E2723] text-[#FAF6F1] flex flex-col items-center justify-center p-6 text-center relative overflow-hidden font-sans\">\r\n            <div className=\"absolute inset-0 opacity-10\" style={{ backgroundImage: 'radial-gradient(#5D4037 1px, transparent 1px)', backgroundSize: '20px 20px' }} />\r\n\r\n            <div className=\"relative mb-8 z-10\">\r\n                <motion.div\r\n                    initial={{ scale: 0, opacity: 0 }}\r\n                    animate={{ scale: 1, opacity: 1 }}\r\n                    transition={{ type: \"spring\", stiffness: 150, damping: 15 }}\r\n                    className=\"w-48 h-48 rounded-full overflow-hidden border-4 border-white/20 shadow-2xl relative\"\r\n                >\r\n                    <video\r\n                        src={coffeeVideo}\r\n                        autoPlay\r\n                        loop\r\n                        muted\r\n                        playsInline\r\n                        className=\"w-full h-full object-cover scale-125\"\r\n                    />\r\n                    <div className=\"absolute inset-0 bg-black/20\" />\r\n                </motion.div>\r\n\r\n                <motion.div\r\n                    initial={{ scale: 0 }}\r\n                    animate={{ scale: 1 }}\r\n                    transition={{ type: \"spring\", stiffness: 200, damping: 20, delay: 0.5 }}\r\n                    className=\"absolute -bottom-2 -right-2 w-16 h-16 bg-green-500 rounded-full flex items-center justify-center shadow-xl border-4 border-[#3E2723]\"\r\n                >\r\n                    <Check size={28} className=\"text-white\" strokeWidth={4} />\r\n                </motion.div>\r\n            </div>\r\n\r\n            <motion.h1\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: 0.3 }}\r\n                className=\"text-4xl font-black mb-2 font-serif\"\r\n            >\r\n                Order Confirmed!\r\n            </motion.h1>\r\n\r\n            <motion.p\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                transition={{ delay: 0.5 }}\r\n                className=\"text-white/80 mb-8 max-w-xs mx-auto font-medium\"\r\n            >\r\n                {order?.status === 'ready'\r\n                    ? \"Your order is ready! Come get it while it's hot.\"\r\n                    : order?.status === 'delivered'\r\n                        ? \"Order delivered. Hope it helps you survive the day!\"\r\n                        : (initialMode === 'delivery'\r\n                            ? \"Order placed. Now go touch grass. Just kidding — finish that assignment.\"\r\n                            : \"Your order is being prepared. Please collect it from the counter.\")\r\n                }\r\n            </motion.p>\r\n\r\n            <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: 0.7 }}\r\n                className=\"bg-white/10 backdrop-blur-md rounded-2xl p-6 w-full max-w-sm mb-8 border border-white/10\"\r\n            >\r\n                <div className=\"flex justify-between mb-4 pb-4 border-b border-white/10\">\r\n                    <span className=\"text-white/60 text-sm font-bold uppercase tracking-wider\">Order ID</span>\r\n                    <span className=\"font-mono font-black text-[#D4AF37]\">#{orderId?.slice(0, 8).toUpperCase() || 'N/A'}</span>\r\n                </div>\r\n\r\n                <div className=\"flex justify-between mb-4 pb-4 border-b border-white/10\">\r\n                    <span className=\"text-white/60 text-sm font-bold uppercase tracking-wider\">Status</span>\r\n                    <span className={`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${order?.status === 'ready' ? 'bg-purple-500 text-white shadow-[0_0_15px_rgba(168,85,247,0.5)]' :\r\n                            order?.status === 'delivered' ? 'bg-green-500 text-white' :\r\n                                'bg-blue-500 text-white animate-pulse'\r\n                        }`}>\r\n                        {order?.status || 'Processing'}\r\n                    </span>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col gap-4\">\r\n                    <div className=\"flex justify-between items-center\">\r\n                        <span className=\"text-white/60 text-sm font-bold flex items-center gap-2 uppercase tracking-wider\"><Clock size={16} /> Est. Time</span>\r\n                        <span className=\"font-black text-[#D4AF37]\">\r\n                            {initialMode === 'delivery' ? '~20-30 mins' : '~10-15 mins'}\r\n                        </span>\r\n                    </div>\r\n\r\n                    {initialMode === 'delivery' && initialHostel && (\r\n                        <div className=\"flex justify-between items-start text-left\">\r\n                            <span className=\"text-white/60 text-sm font-bold flex items-center gap-2 shrink-0 uppercase tracking-wider\"><MapPin size={16} /> Delivering To</span>\r\n                            <span className=\"font-black text-white text-right text-sm\">\r\n                                {initialHostel.block}<br />\r\n                                <span className=\"text-white/60 font-medium\">Room {initialHostel.room}</span>\r\n                            </span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </motion.div>\r\n\r\n            <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: 0.9 }}\r\n                className=\"flex flex-col gap-4 w-full max-w-sm relative z-10\"\r\n            >\r\n                <div className=\"flex flex-col gap-2\">\r\n                    <p className=\"text-white/60 text-xs font-bold uppercase tracking-widest text-center\">\r\n                        Explore some fun facts while your order is being prepared ;)\r\n                    </p>\r\n                    <Link\r\n                        to=\"/fun-facts\"\r\n                        className=\"w-full bg-[#D4AF37] text-[#3E2723] py-4 rounded-2xl font-black hover:bg-[#c19d2f] transition-all flex items-center justify-center gap-2 shadow-lg active:scale-95\"\r\n                    >\r\n                        Fun Facts Time!\r\n                    </Link>\r\n                </div>\r\n                <Link\r\n                    to=\"/\"\r\n                    className=\"w-full bg-white text-[#3E2723] py-4 rounded-2xl font-black hover:bg-gray-100 transition-all flex items-center justify-center gap-2 shadow-lg active:scale-95\"\r\n                >\r\n                    Back to Menu <ArrowRight size={18} />\r\n                </Link>\r\n            </motion.div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default OrderConfirmPage;\r\n"],"names":["OrderConfirmPage","clearCart","useCart","location","useLocation","order","setOrder","React","loading","setLoading","orderId","orderMode","initialMode","hostelDetails","initialHostel","state","useEffect","fetchOrder","subscription","supabase","channel","on","event","schema","table","filter","payload","new","toast","success","status","toUpperCase","icon","subscribe","removeChannel","end","Date","now","frame","confetti","particleCount","angle","spread","origin","x","colors","requestAnimationFrame","navigator","vibrate","e","async","data","error","from","select","eq","single","console","_jsxs","className","children","_jsx","style","backgroundImage","backgroundSize","motion","div","initial","scale","opacity","animate","transition","type","stiffness","damping","src","coffeeVideo","autoPlay","loop","muted","playsInline","delay","Check","size","strokeWidth","h1","y","p","slice","Clock","MapPin","block","room","Link","to","ArrowRight"],"sourceRoot":""}